generator client {
  provider = "prisma-client-js"
  output   = "../lib/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model hotspot {
  id              Int             @id @default(autoincrement())
  wayru_device_id String          @db.Uuid
  network_configs networkConfig[]
  portal_configs  portalConfig[]
}

model portalConfig {
  id               Int      @id @default(autoincrement())
  hotspot_id       Int
  title            String
  description      String?
  background_color String?
  assetId          Int
  logo             asset    @relation("LogoAsset", fields: [assetId], references: [id], map: "portalConfig_logo_assetId_fkey")
  banner           asset    @relation("BannerAsset", fields: [assetId], references: [id], map: "portalConfig_banner_assetId_fkey")
  ads              ad[]
  redirect_url     String
  hotspot          hotspot? @relation(fields: [hotspotId], references: [id])
  hotspotId        Int?
}

model networkConfig {
  id               Int      @id @default(autoincrement())
  device_config_id String   @db.Uuid
  device_config    Json
  hotspot          hotspot? @relation(fields: [hotspotId], references: [id])
  hotspotId        Int?
}

model ad {
  id               Int           @id @default(autoincrement())
  portal_config_id Int?
  interaction_time Int
  ad_asset_id      Int?
  asset            asset?        @relation(fields: [ad_asset_id], references: [id])
  format           adFormat
  portalConfig     portalConfig? @relation(fields: [portalConfigId], references: [id])
  portalConfigId   Int?
}

model asset {
  id                 Int            @id @default(autoincrement())
  portal_config_id   Int?
  ad_asset_id        Int?
  asset_url          String
  logoPortalConfig   portalConfig[] @relation("LogoAsset")
  bannerPortalConfig portalConfig[] @relation("BannerAsset")
  adAsset            ad[]
}

enum adFormat {
  static
  gif
  video
}
